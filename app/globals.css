/* GitHub-like primer-inspired design tokens (simplified) */
:root {
  --color-fg-default: #24292f;
  --color-fg-muted: #57606a;
  --color-canvas-default: #ffffff;
  --color-canvas-subtle: #f6f8fa;
  --color-border-default: #d0d7de;
  --color-accent-fg: #0969da;
  --color-danger-fg: #cf222e;
  --shadow-sm: 0 1px 0 rgba(27,31,36,0.04), 0 1px 2px rgba(27,31,36,0.15);
}

:root[data-theme='dark'] {
  --color-fg-default: #e6edf3;
  --color-fg-muted: #7d8590;
  --color-canvas-default: #0d1117;
  --color-canvas-subtle: #161b22;
  --color-border-default: #30363d;
  --color-accent-fg: #2f81f7;
  --color-danger-fg: #ff6a69;
  --shadow-sm: 0 0 0 1px rgba(240,246,252,0.1), 0 1px 3px rgba(1,4,9,0.4);
}

html, body { padding:0; margin:0; font-family: system-ui,-apple-system,Segoe UI,Helvetica,Arial,sans-serif; background: var(--color-canvas-default); color: var(--color-fg-default); font-size:16px; line-height:1.45; }

body { min-height: 100vh; display:flex; flex-direction:column; }

.app-header { display:flex; align-items:center; justify-content:space-between; padding: 0.75rem 1rem; background: var(--color-canvas-subtle); border-bottom:1px solid var(--color-border-default); }
.app-header h1 { font-size:1.3rem; margin:0; line-height:1.2; }

.app-footer { margin-top:auto; padding:0.85rem 1.1rem; font-size:0.8rem; color: var(--color-fg-muted); border-top:1px solid var(--color-border-default); background: var(--color-canvas-subtle); }

.content-grid { display:grid; gap:1rem; padding:1rem; grid-template-columns: repeat(auto-fit, minmax(260px,1fr)); }
.panel { background: var(--color-canvas-subtle); border:1px solid var(--color-border-default); padding:1rem; border-radius:6px; box-shadow: var(--shadow-sm); display:flex; flex-direction:column; gap:0.5rem; }
.panel.span-2 { grid-column: span 2; }

h2 { margin:0 0 .55rem; font-size:1.15rem; line-height:1.25; }

.token-form, .repo-selector { display:flex; flex-direction:column; gap:.5rem; }
.repo-selector { flex-direction:row; align-items:center; }

.input { background: var(--color-canvas-default); border:1px solid var(--color-border-default); border-radius:6px; padding:0.5rem .7rem; font-size:0.95rem; color:inherit; }
.input:focus { outline:2px solid var(--color-accent-fg); outline-offset:1px; }

/* Button Base & Variants (GitHub-inspired) */
.btn { position:relative; font-weight:500; display:inline-flex; align-items:center; justify-content:center; gap:.35rem; border-radius:6px; font-size:0.9rem; line-height:1.3; padding:0.55rem 1rem; cursor:pointer; user-select:none; transition:background-color .12s ease,border-color .12s ease,box-shadow .12s ease,color .12s ease; border:1px solid transparent; text-decoration:none; }
.btn:disabled { cursor:not-allowed; opacity:0.6; box-shadow:none; }

/* Primary (green) */
.btn-primary { color:#fff; background:#1f883d; border-color:rgba(31,136,61,1); box-shadow:0 1px 0 rgba(27,31,36,.1); }
.btn-primary:hover:not(:disabled) { background:#1a7f37; border-color:rgba(26,127,55,1); }
.btn-primary:active:not(:disabled) { background:#17832d; box-shadow:inset 0 1px 0 rgba(0,0,0,.15); }
html[data-theme='dark'] .btn-primary { background:#2ea043; border-color:#3fb950; }
html[data-theme='dark'] .btn-primary:hover:not(:disabled) { background:#309043; }

/* Default (secondary outline) */
.btn-default { color: var(--color-fg-default); background: linear-gradient(-180deg,#f6f8fa,#eaeef2); border-color: var(--color-border-default); box-shadow:0 1px 0 rgba(27,31,36,.04); }
.btn-default:hover:not(:disabled) { background:#f3f4f6; }
.btn-default:active:not(:disabled) { background:#e6e9ec; box-shadow:inset 0 1px 0 rgba(0,0,0,.05); }
html[data-theme='dark'] .btn-default { background:#21262d; border-color:#30363d; color:#e6edf3; }
html[data-theme='dark'] .btn-default:hover:not(:disabled) { background:#292f36; }

/* Invisible (text button) */
.btn-invisible { background:transparent; color: var(--color-fg-default); padding:0.45rem .6rem; border:1px solid transparent; }
.btn-invisible:hover:not(:disabled) { background: var(--color-canvas-subtle); border-color: var(--color-border-default); }
html[data-theme='dark'] .btn-invisible:hover:not(:disabled) { background:#1b1f24; border-color:#30363d; }

/* Danger (red outline, transparent bg) */
.btn-danger { background:#fff; color: var(--color-danger-fg); border-color: var(--color-border-default); }
.btn-danger:hover:not(:disabled) { background:#ffebe9; border-color:#ff8182; }
.btn-danger:active:not(:disabled) { background:#ffdedb; }
html[data-theme='dark'] .btn-danger { background:transparent; color:#ff6a69; border-color:#30363d; }
html[data-theme='dark'] .btn-danger:hover:not(:disabled) { background:#3c1e1e; border-color:#ff6a69; }

/* Size modifiers */
.btn.small { padding:0.4rem .7rem; font-size:0.78rem; }

/* Icon button (for theme toggle) */
.btn-icon { width:38px; height:38px; padding:0; font-size:18px; border-radius:50%; display:inline-flex; align-items:center; justify-content:center; }
.btn-icon.btn-invisible { border:1px solid var(--color-border-default); background: var(--color-canvas-default); }
.btn-icon.btn-invisible:hover:not(:disabled) { background: var(--color-canvas-subtle); }
html[data-theme='dark'] .btn-icon.btn-invisible { border-color:#30363d; background:#1d2228; }
html[data-theme='dark'] .btn-icon.btn-invisible:hover:not(:disabled) { background:#262c33; }

.list { list-style:none; padding:0; margin:0; display:flex; flex-direction:column; gap:.5rem; }
.list-item { display:flex; align-items:center; justify-content:space-between; gap:1rem; padding:.65rem .75rem; background: var(--color-canvas-default); border:1px solid var(--color-border-default); border-radius:6px; }
.list-item:hover { border-color: var(--color-accent-fg); }
.list-item.pending { opacity:0.5; filter:grayscale(0.4); pointer-events:none; }

/* Visual hint when issue is on hold */
.list-item.on-hold { box-shadow: inset 0 0 0 1px var(--color-border-default), 0 0 0 2px rgba(255,196,0,0.35); }
html[data-theme='dark'] .list-item.on-hold { box-shadow: inset 0 0 0 1px var(--color-border-default), 0 0 0 2px rgba(255,196,0,0.25); }

/* Clickable issue title link */
.issue-title-link { color: var(--color-fg-default); text-decoration:none; }
.issue-title-link:hover { text-decoration:underline; color: var(--color-accent-fg); }
html[data-theme='dark'] .issue-title-link:hover { color: var(--color-accent-fg); }
.flex-col { display:flex; flex-direction:column; gap:0.2rem; }
.muted { color: var(--color-fg-muted); font-size:0.78rem; }
.hint { color: var(--color-fg-muted); font-size:0.72rem; margin:0; }
.checkbox-row { display:flex; align-items:center; gap:.3rem; font-size:0.65rem; }
.error { color: var(--color-danger-fg); font-size:0.78rem; }
.actions-row { display:flex; gap:.4rem; }

/* Labels row for issue badges */
.labels-row { display:flex; flex-wrap:wrap; gap:4px; margin-top:2px; }

/* Individual label badge styling (GitHub-inspired rounded pill) */
.label-badge { 
  --_bg: var(--color-canvas-subtle);
  display:inline-flex; align-items:center; justify-content:center; gap:4px;
  font-size:0.62rem; font-weight:500; padding:3px 7px; line-height:1.25;
  border-radius:999px; position:relative; text-transform:none; letter-spacing:.25px;
  color:#fff; background: var(--_bg); box-shadow:0 0 0 1px rgba(0,0,0,0.15);
}
html[data-theme='dark'] .label-badge { box-shadow:0 0 0 1px rgba(255,255,255,0.15); }

/* Provide a fallback class when dynamic inline color is not injected */
.label-badge.fallback { background:#777; }

/* Inline spinner for pending issue actions */
@keyframes spin { to { transform: rotate(360deg); } }
.spinner { width:16px; height:16px; border:2px solid var(--color-border-default); border-top-color: var(--color-accent-fg); border-radius:50%; animation: spin .6s linear infinite; }

/* Generic badges (used besides labels) */
.badge { --_bg: var(--color-canvas-subtle); --_fg: var(--color-fg-muted); display:inline-flex; align-items:center; gap:4px; font-size:0.62rem; font-weight:600; line-height:1.1; letter-spacing:.25px; padding:4px 7px; border-radius:999px; background:var(--_bg); color:var(--_fg); border:1px solid var(--color-border-default); text-transform:uppercase; }
.badge-md { font-size:0.72rem; padding:5px 9px; }
.badge-success { --_bg:#1f883d; --_fg:#fff; }
html[data-theme='dark'] .badge-success { --_bg:#238636; }
.badge-danger { --_bg:#cf222e; --_fg:#fff; }
.badge-accent { --_bg: var(--color-accent-fg); --_fg:#fff; }
.badge-info { --_bg:#0969da; --_fg:#fff; }
.badge-warning { --_bg:#bf8700; --_fg:#fff; }
.badge:not(.label-badge)+.badge { margin-left:2px; }

/* Skeleton loading shimmer */
.skeleton { position:relative; overflow:hidden; background: linear-gradient(90deg,var(--color-canvas-subtle), var(--color-canvas-default), var(--color-canvas-subtle)); background-size:200% 100%; animation: shimmer 1.2s ease-in-out infinite; border-radius:4px; }
@keyframes shimmer { 0% { background-position: 200% 0; } 100% { background-position: -200% 0; } }
.skeleton.bar { height:10px; }
.skeleton.circle { border-radius:50%; }

/* Utility spacing tweaks */
.gap-xs { gap:0.3rem; }
.gap-sm { gap:0.5rem; }
.text-xs { font-size:0.6rem; }
.text-sm { font-size:0.78rem; }

/* Focus outlines unify for a11y */
*:focus-visible { outline:2px solid var(--color-accent-fg); outline-offset:2px; border-radius:4px; }

/* Toast notifications */
.toasts { position:fixed; top:1rem; right:1rem; display:flex; flex-direction:column; gap:.5rem; z-index:1000; max-width:320px; }
.toast { --_bg: var(--color-canvas-subtle); --_border: var(--color-border-default); --_fg: var(--color-fg-default); background:var(--_bg); color:var(--_fg); border:1px solid var(--_border); padding:.6rem .75rem; border-radius:8px; box-shadow: var(--shadow-sm); display:flex; align-items:flex-start; gap:.75rem; animation: toast-in .25s ease; position:relative; overflow:hidden; }
.toast::after { content:''; position:absolute; inset:0; background:linear-gradient(120deg,rgba(255,255,255,0.04),transparent); pointer-events:none; }
.toast-success { --_bg:#1f883d; --_border:#1a7f37; --_fg:#fff; }
.toast-error { --_bg:#cf222e; --_border:#a40e26; --_fg:#fff; }
.toast-info { --_bg:#0969da; --_border:#0a5cc0; --_fg:#fff; }
html[data-theme='dark'] .toast { --_bg: var(--color-canvas-subtle); }
.toast-body { display:flex; flex-direction:column; gap:3px; font-size:.78rem; line-height:1.3; }
.toast-title { font-size:.78rem; }
.toast-message { font-size:.72rem; }
.toast-close { align-self:flex-start; margin-top:-.25rem; margin-right:-.4rem; }
@keyframes toast-in { from { transform:translateY(-6px); opacity:0; } to { transform:translateY(0); opacity:1; } }

@media (max-width: 900px) {
  .panel.span-2 { grid-column: span 1; }
}
/* Remove duplicated dark-only overrides above; rely on token system. */

/* Improve native form controls rendering according to theme */
html { color-scheme: light dark; }

/* Utility: force dark mode via class (in addition to [data-theme=dark]) */
/* (Optional) a .dark class could be added to html if needed; no extra rules required now. */

/* Accessibility utilities */
.sr-only { position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0 0 0 0); white-space:nowrap; border:0; }
.skip-link { position:absolute; top:0; left:0; transform:translateY(-110%); background: var(--color-accent-fg); color:#fff; padding:.65rem 1rem; z-index:2000; border-radius:0 0 6px 0; text-decoration:none; font-weight:600; }
.skip-link:focus { transform:translateY(0); outline:2px solid #fff; }

@media (prefers-reduced-motion: reduce) {
  * { animation-duration:0.01ms !important; animation-iteration-count:1 !important; transition:none !important; scroll-behavior:auto !important; }
  .spinner { animation:none; }
}
